/*C22*/SET SCHEMA PUBLIC
DROP TABLE IF EXISTS newsRead
DROP TABLE IF EXISTS articleforperformance
DROP TABLE IF EXISTS employee
DROP TABLE IF EXISTS entry
DROP TABLE IF EXISTS receipt
DROP TABLE IF EXISTS article
DROP TABLE IF EXISTS bankaccount
DROP TABLE IF EXISTS cash
DROP TABLE IF EXISTS creditcard
DROP TABLE IF EXISTS methodofpayment
DROP TABLE IF EXISTS news
DROP TABLE IF EXISTS ticketidentifier
DROP TABLE IF EXISTS reservation
DROP TABLE IF EXISTS participation
DROP TABLE IF EXISTS artist
DROP TABLE IF EXISTS newsRead
DROP TABLE IF EXISTS articleforperformance
DROP TABLE IF EXISTS employee
DROP TABLE IF EXISTS entry
DROP TABLE IF EXISTS receipt
DROP TABLE IF EXISTS article
DROP TABLE IF EXISTS bankaccount
DROP TABLE IF EXISTS cash
DROP TABLE IF EXISTS creditcard
DROP TABLE IF EXISTS methodofpayment
DROP TABLE IF EXISTS news
DROP TABLE IF EXISTS ticketidentifier
DROP TABLE IF EXISTS reservation
DROP TABLE IF EXISTS participation
DROP TABLE IF EXISTS artist
DROP TABLE IF EXISTS newsRead
DROP TABLE IF EXISTS articleforperformance
DROP TABLE IF EXISTS employee
DROP TABLE IF EXISTS entry
DROP TABLE IF EXISTS receipt
DROP TABLE IF EXISTS article
DROP TABLE IF EXISTS bankaccount
DROP TABLE IF EXISTS cash
DROP TABLE IF EXISTS creditcard
DROP TABLE IF EXISTS methodofpayment
DROP TABLE IF EXISTS news
DROP TABLE IF EXISTS ticketidentifier
DROP TABLE IF EXISTS reservation
DROP TABLE IF EXISTS participation
DROP TABLE IF EXISTS artist
DROP TABLE IF EXISTS newsRead
DROP TABLE IF EXISTS articleforperformance
DROP TABLE IF EXISTS employee
DROP TABLE IF EXISTS entry
DROP TABLE IF EXISTS receipt
DROP TABLE IF EXISTS article
DROP TABLE IF EXISTS bankaccount
DROP TABLE IF EXISTS cash
DROP TABLE IF EXISTS creditcard
DROP TABLE IF EXISTS methodofpayment
DROP TABLE IF EXISTS news
DROP TABLE IF EXISTS ticketidentifier
DROP TABLE IF EXISTS reservation
DROP TABLE IF EXISTS participation
DROP TABLE IF EXISTS artist
DROP TABLE IF EXISTS ticket
DROP TABLE IF EXISTS seat
DROP TABLE IF EXISTS category
DROP TABLE IF EXISTS coordinate
DROP TABLE IF EXISTS row
DROP TABLE IF EXISTS gallery
DROP TABLE IF EXISTS show
DROP TABLE IF EXISTS room
DROP TABLE IF EXISTS location
DROP TABLE IF EXISTS performance
DROP TABLE IF EXISTS basket
DROP TABLE IF EXISTS customer
CREATE TABLE artist (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u000a\u0009firstname VARCHAR(50) NOT NULL,\u000a\u0009lastname VARCHAR(50) NOT NULL,\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE performance (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009content VARCHAR(1024),\u000a\u0009description VARCHAR(1024) NOT NULL,\u0009\u000a\u0009durationInMinutes Integer,\u000a\u0009performancetype VARCHAR(50),\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE participation (\u0009\u000a\u0009artist_id INTEGER NOT NULL,\u000a\u0009perf_id INTEGER NOT NULL, \u000a\u0009PRIMARY KEY(artist_id, perf_id),\u000a\u0009FOREIGN KEY(artist_id) REFERENCES artist(id),\u000a\u0009FOREIGN KEY(perf_id) REFERENCES performance(id)\u000a)
CREATE TABLE location (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009city VARCHAR(50),\u000a\u0009country VARCHAR(50),\u000a\u0009description VARCHAR(1024),\u000a\u0009postalcode VARCHAR(25),\u000a\u0009street VARCHAR(50),\u0009\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE show (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009dateofperformance TIMESTAMP,\u000a\u0009priceInCent INTEGER NOT NULL,\u000a\u0009room VARCHAR(50) NOT NULL,\u000a\u0009location_id INTEGER NOT NULL,\u000a\u0009perf_id INTEGER NOT NULL,\u0009\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(location_id) REFERENCES location(id),\u000a\u0009FOREIGN KEY(perf_id) REFERENCES performance(id)\u0009\u000a)
CREATE TABLE row (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009sequence INTEGER NOT NULL,\u000a\u0009show_id INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(show_id) REFERENCES show(id)\u000a)
CREATE TABLE customer (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009city VARCHAR(50),\u000a\u0009country VARCHAR(50),\u000a\u0009dateofbirth DATE,\u000a\u0009email VARCHAR(255),\u000a\u0009firstname VARCHAR(50) NOT NULL,\u000a\u0009isfemale BOOLEAN,\u000a\u0009lastname VARCHAR(50) NOT NULL,\u000a\u0009points INTEGER,\u0009\u0009\u000a\u0009postalcode VARCHAR(25),\u000a\u0009street VARCHAR(50),\u000a\u0009telephonenumber VARCHAR(50),\u000a\u0009title VARCHAR(25),\u0009\u0009\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE basket (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009creationdate DATE NOT NULL,\u000a\u0009cust_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(cust_id) REFERENCES customer(id),\u000a)
CREATE TABLE ticket (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u000a\u0009show_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(show_id) REFERENCES show(id)\u0009\u000a)
CREATE TABLE seat(\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u0009\u000a\u0009sequence INTEGER NOT NULL,\u0009\u000a\u0009row_id INTEGER NOT NULL,\u000a\u0009ticket_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u0009\u000a\u0009FOREIGN KEY(row_id) REFERENCES row(id),\u0009\u000a\u0009FOREIGN KEY(ticket_id) REFERENCES ticket(id) ON DELETE SET NULL\u000a)
CREATE TABLE article (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u000a\u0009description VARCHAR(1024),\u000a\u0009name VARCHAR(100) NOT NULL,\u000a\u0009priceInCent INTEGER,\u000a\u0009priceInPoints INTEGER, \u000a\u0009PRIMARY KEY(id)\u0009\u000a)
CREATE TABLE articleforperformance(\u000a\u0009article_id INTEGER NOT NULL,\u000a\u0009performance_id INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(article_id, performance_id),\u000a\u0009FOREIGN KEY(article_id) REFERENCES article(id),\u000a\u0009FOREIGN KEY(performance_id) REFERENCES performance(id)\u000a)
CREATE TABLE employee (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009isadmin BOOLEAN NOT NULL,\u0009\u000a\u0009passwordhash VARCHAR(512) NOT NULL,\u0009\u000a\u0009username VARCHAR(50) NOT NULL UNIQUE,\u000a\u0009wrongPasswordCounter INTEGER NOT NULL,\u0009\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE receipt (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009transactiondate TIMESTAMP NOT NULL,\u0009\u000a\u0009paymentType INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(id)\u0009\u000a)
CREATE TABLE entry (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009amount INTEGER NOT NULL,\u000a\u0009buywithpoints BOOLEAN NOT NULL,\u000a\u0009sold BOOLEAN NOT NULL,\u0009\u000a\u0009article_id INTEGER,\u000a\u0009basket_id INTEGER NOT NULL,\u000a\u0009rec_id INTEGER,\u000a\u0009ticket_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(article_id) REFERENCES article(id),\u000a\u0009FOREIGN KEY(basket_id) REFERENCES basket(id),\u000a\u0009FOREIGN KEY(rec_id) REFERENCES receipt(id),\u000a\u0009FOREIGN KEY(ticket_id) REFERENCES ticket(id)\u000a)
CREATE TABLE news (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009newstext VARCHAR(1024) NOT NULL,\u000a\u0009submittedon TIMESTAMP NOT NULL,\u000a\u0009title VARCHAR(255) NOT NULL,\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE newsread (\u000a\u0009employee_id INTEGER NOT NULL,\u000a\u0009news_id INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(employee_id, news_id),\u000a\u0009FOREIGN KEY(employee_id) REFERENCES employee(id),\u000a\u0009FOREIGN KEY(news_id) REFERENCES news(id)\u000a)
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DROP TABLE IF EXISTS newsRead
DROP TABLE IF EXISTS articleforperformance
DROP TABLE IF EXISTS employee
DROP TABLE IF EXISTS entry
DROP TABLE IF EXISTS receipt
DROP TABLE IF EXISTS article
DROP TABLE IF EXISTS bankaccount
DROP TABLE IF EXISTS cash
DROP TABLE IF EXISTS creditcard
DROP TABLE IF EXISTS methodofpayment
DROP TABLE IF EXISTS news
DROP TABLE IF EXISTS ticketidentifier
DROP TABLE IF EXISTS reservation
DROP TABLE IF EXISTS participation
DROP TABLE IF EXISTS artist
DROP TABLE IF EXISTS seat
DROP TABLE IF EXISTS ticket
DROP TABLE IF EXISTS category
DROP TABLE IF EXISTS coordinate
DROP TABLE IF EXISTS row
DROP TABLE IF EXISTS gallery
DROP TABLE IF EXISTS show
DROP TABLE IF EXISTS room
DROP TABLE IF EXISTS location
DROP TABLE IF EXISTS performance
DROP TABLE IF EXISTS basket
DROP TABLE IF EXISTS customer
CREATE TABLE artist (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u000a\u0009firstname VARCHAR(50) NOT NULL,\u000a\u0009lastname VARCHAR(50) NOT NULL,\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE performance (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009content VARCHAR(1024),\u000a\u0009description VARCHAR(1024) NOT NULL,\u0009\u000a\u0009durationInMinutes Integer,\u000a\u0009performancetype VARCHAR(50),\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE participation (\u0009\u000a\u0009artist_id INTEGER NOT NULL,\u000a\u0009perf_id INTEGER NOT NULL, \u000a\u0009PRIMARY KEY(artist_id, perf_id),\u000a\u0009FOREIGN KEY(artist_id) REFERENCES artist(id),\u000a\u0009FOREIGN KEY(perf_id) REFERENCES performance(id)\u000a)
CREATE TABLE location (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009city VARCHAR(50),\u000a\u0009country VARCHAR(50),\u000a\u0009description VARCHAR(1024),\u000a\u0009postalcode VARCHAR(25),\u000a\u0009street VARCHAR(50),\u0009\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE show (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009dateofperformance TIMESTAMP,\u000a\u0009priceInCent INTEGER NOT NULL,\u000a\u0009room VARCHAR(50) NOT NULL,\u000a\u0009location_id INTEGER NOT NULL,\u000a\u0009perf_id INTEGER NOT NULL,\u0009\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(location_id) REFERENCES location(id),\u000a\u0009FOREIGN KEY(perf_id) REFERENCES performance(id)\u0009\u000a)
CREATE TABLE row (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009sequence INTEGER NOT NULL,\u000a\u0009show_id INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(show_id) REFERENCES show(id)\u000a)
CREATE TABLE customer (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009city VARCHAR(50),\u000a\u0009country VARCHAR(50),\u000a\u0009dateofbirth DATE,\u000a\u0009email VARCHAR(255),\u000a\u0009firstname VARCHAR(50) NOT NULL,\u000a\u0009isfemale BOOLEAN,\u000a\u0009lastname VARCHAR(50) NOT NULL,\u000a\u0009points INTEGER,\u0009\u0009\u000a\u0009postalcode VARCHAR(25),\u000a\u0009street VARCHAR(50),\u000a\u0009telephonenumber VARCHAR(50),\u000a\u0009title VARCHAR(25),\u0009\u0009\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE basket (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009creationdate DATE NOT NULL,\u000a\u0009cust_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(cust_id) REFERENCES customer(id),\u000a)
CREATE TABLE ticket (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u000a\u0009show_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(show_id) REFERENCES show(id)\u0009\u000a)
CREATE TABLE seat(\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u0009\u000a\u0009sequence INTEGER NOT NULL,\u0009\u000a\u0009row_id INTEGER NOT NULL,\u000a\u0009ticket_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u0009\u000a\u0009FOREIGN KEY(row_id) REFERENCES row(id),\u0009\u000a\u0009FOREIGN KEY(ticket_id) REFERENCES ticket(id) ON DELETE SET NULL\u000a)
CREATE TABLE article (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u0009\u000a\u0009description VARCHAR(1024),\u000a\u0009name VARCHAR(100) NOT NULL,\u000a\u0009priceInCent INTEGER,\u000a\u0009priceInPoints INTEGER, \u000a\u0009PRIMARY KEY(id)\u0009\u000a)
CREATE TABLE articleforperformance(\u000a\u0009article_id INTEGER NOT NULL,\u000a\u0009performance_id INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(article_id, performance_id),\u000a\u0009FOREIGN KEY(article_id) REFERENCES article(id),\u000a\u0009FOREIGN KEY(performance_id) REFERENCES performance(id)\u000a)
CREATE TABLE employee (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009isadmin BOOLEAN NOT NULL,\u0009\u000a\u0009passwordhash VARCHAR(512) NOT NULL,\u0009\u000a\u0009username VARCHAR(50) NOT NULL UNIQUE,\u000a\u0009wrongPasswordCounter INTEGER NOT NULL,\u0009\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE receipt (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009transactiondate TIMESTAMP NOT NULL,\u0009\u000a\u0009paymentType INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(id)\u0009\u000a)
CREATE TABLE entry (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009amount INTEGER NOT NULL,\u000a\u0009buywithpoints BOOLEAN NOT NULL,\u000a\u0009sold BOOLEAN NOT NULL,\u0009\u000a\u0009article_id INTEGER,\u000a\u0009basket_id INTEGER NOT NULL,\u000a\u0009rec_id INTEGER,\u000a\u0009ticket_id INTEGER,\u000a\u0009PRIMARY KEY(id),\u000a\u0009FOREIGN KEY(article_id) REFERENCES article(id),\u000a\u0009FOREIGN KEY(basket_id) REFERENCES basket(id),\u000a\u0009FOREIGN KEY(rec_id) REFERENCES receipt(id),\u000a\u0009FOREIGN KEY(ticket_id) REFERENCES ticket(id)\u000a)
CREATE TABLE news (\u000a\u0009id INTEGER GENERATED BY DEFAULT AS IDENTITY,\u000a\u0009newstext VARCHAR(1024) NOT NULL,\u000a\u0009submittedon TIMESTAMP NOT NULL,\u000a\u0009title VARCHAR(255) NOT NULL,\u000a\u0009PRIMARY KEY(id)\u000a)
CREATE TABLE newsread (\u000a\u0009employee_id INTEGER NOT NULL,\u000a\u0009news_id INTEGER NOT NULL,\u000a\u0009PRIMARY KEY(employee_id, news_id),\u000a\u0009FOREIGN KEY(employee_id) REFERENCES employee(id),\u000a\u0009FOREIGN KEY(news_id) REFERENCES news(id)\u000a)
DISCONNECT
